<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quick API Test</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    #result { margin-top: 20px; padding: 20px; background: #f5f5f5; border-radius: 8px; }
    .success { color: green; font-weight: bold; }
    .error { color: red; }
    pre { background: #fff; padding: 10px; border-radius: 4px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>⚡ Quick API Test</h1>
  <p>Testing most common working combinations:</p>
  
  <input type="text" id="apiKeyInput" placeholder="Enter your Gemini API key" 
         style="width: 100%; padding: 10px; font-size: 14px; margin-bottom: 10px;"
         value="AIzaSyAMS3Lg483T8B2UWbE_HbfQoozujLvdGVI">
  
  <button id="testBtn">Test Common Combinations</button>
  
  <div id="result"></div>

  <script>
    // Most common working combinations
    const testConfigs = [
      { version: 'v1', model: 'gemini-pro' },
      { version: 'v1', model: 'gemini-1.0-pro' },
      { version: 'v1', model: 'gemini-1.5-pro' },
      { version: 'v1', model: 'gemini-1.5-flash' },
      { version: 'v1beta', model: 'gemini-pro' },
      { version: 'v1beta', model: 'gemini-1.0-pro' },
      { version: 'v1beta', model: 'gemini-1.5-pro' },
      { version: 'v1beta', model: 'gemini-1.5-flash' },
    ];

    document.getElementById('testBtn').addEventListener('click', async () => {
      const apiKey = document.getElementById('apiKeyInput').value.trim();
      const resultDiv = document.getElementById('result');
      
      if (!apiKey) {
        alert('Please enter an API key');
        return;
      }

      resultDiv.innerHTML = '<p>Testing common combinations...</p>';
      let workingConfig = null;

      for (const config of testConfigs) {
        try {
          const apiUrl = `https://generativelanguage.googleapis.com/${config.version}/models/${config.model}:generateContent?key=${apiKey}`;
          
          resultDiv.innerHTML += `<p>Testing ${config.version}/${config.model}...</p>`;
          
          const response = await fetch(apiUrl, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: "Say 'Hello' if you can read this."
                }]
              }]
            })
          });

          const data = await response.json();

          if (response.ok && data.candidates && data.candidates.length > 0) {
            workingConfig = config;
            resultDiv.innerHTML = `
              <div class="success">
                <h2>✅ FOUND WORKING CONFIGURATION!</h2>
                <p><strong>API Version:</strong> ${config.version}</p>
                <p><strong>Model:</strong> ${config.model}</p>
                <p><strong>Response:</strong> ${data.candidates[0].content.parts[0].text}</p>
                <p><strong>Full URL Pattern:</strong></p>
                <pre>https://generativelanguage.googleapis.com/${config.version}/models/${config.model}:generateContent?key=YOUR_API_KEY</pre>
                <button onclick="copyConfig('${config.version}', '${config.model}')">Copy Config</button>
              </div>
            `;
            break; // Stop testing once we find a working one
          } else {
            resultDiv.innerHTML += `<p class="error">❌ ${config.version}/${config.model} failed: ${data.error?.message || 'Unknown error'}</p>`;
          }
        } catch (error) {
          resultDiv.innerHTML += `<p class="error">❌ ${config.version}/${config.model} error: ${error.message}</p>`;
        }
      }

      if (!workingConfig) {
        resultDiv.innerHTML += '<div class="error"><h2>❌ No working configuration found</h2><p>Try the comprehensive test or check your API key.</p></div>';
      }
    });

    function copyConfig(version, model) {
      const config = `Version: ${version}\nModel: ${model}\nURL: https://generativelanguage.googleapis.com/${version}/models/${model}:generateContent?key=YOUR_API_KEY`;
      navigator.clipboard.writeText(config).then(() => {
        alert('Config copied! Use this in your code.');
      });
    }
  </script>
</body>
</html>

